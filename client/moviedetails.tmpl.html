<div class="container-fluid moviedetails-container" ng-controller="MovieDetailsCtrl as movieDetailsVM">
  <div class="row-fluid">
    <div class="col-md-2 col-md-offset-2 movie-img-col">
      <div class="movie-img">
        <img ng-src="{{movieDetailsVM.movie.poster}}" alt="movieimage">
      </div>
    </div>
    <div class="col-md-6">
      <div class="panel panel-default movie-details-header">
        <div class="panel-heading movie-details-header">
          <div class="panel-title white font-30">{{movieDetailsVM.movie.title}}
            <div ng-controller="RatingDemoCtrl" class="font-20">
              <span class="orange" uib-rating ng-model="movieDetailsVM.movie.imdbRating" max="max" read-only="isReadonly" titles="['1','2','3']"></span>
              <span>({{movieDetailsVM.movie.imdbRating}}) {{movieDetailsVM.movie.imdbVotes}} votes</span>
            </div>
          </div>
          <hr class="title-hr">
        </div>
        <div class="panel-body">
          <div class="font-15 movie-info">
            <ul>
              <li>{{movieDetailsVM.movie.rated}}</li>
              <li><span ng-repeat="language in movieDetailsVM.movie.language">{{language.name}}<font ng-show="!$last">, </font></span> {{language.name}}</li>
              <li><span ng-repeat="country in movieDetailsVM.movie.country">{{country.name}}<font ng-show="!$last">, </font></span> {{country.name}}</li>
            </ul>
          </div>
          <div class="font-15">
            <div><span ng-repeat="genre in movieDetailsVM.movie.genre">{{genre.name}}<font ng-show="!$last">, </font></span> {{genre.name}}</div>
            <div>Released : {{movieDetailsVM.movie.released}}</div>
            <div>Runtime : {{movieDetailsVM.movie.runtime}}</div>
            <div>Directed By : <span ng-repeat="director in movieDetailsVM.movie.director">{{director.name}}<font ng-show="!$last">, </font></span> {{director.name}}</div>
            <div>Writen By : <span ng-repeat="writer in movieDetailsVM.movie.writer">{{writer.name}}<font ng-show="!$last">, </font></span> {{writer.name}}</div>
            <div>Cast : <span ng-repeat="actor in movieDetailsVM.movie.actor">{{actor.name}}<font ng-show="!$last">, </font></span> {{actor.name}}</div>
            <div>Awards : {{movieDetailsVM.movie.awards}}</div>
            <div>Type : {{movieDetailsVM.movie.type.name}}</div>
            <div ng-controller="UserFixedRatingCtrl as userFixedRateVM">
              User Rating : <span class="orange" uib-rating ng-model="movieDetailsVM.movie.userRating" max="userFixedRateVM.max" read-only="userFixedRateVM.isReadonly" titles="['1','2','3']"></span>
              <span>({{movieDetailsVM.movie.userRating}})</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-md-8 col-md-offset-2">
      <div class="font-15">Plot: {{movieDetailsVM.movie.plot}}</div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-md-8 col-md-offset-2 pad-top-20">
      <div class="panel panel-default">
        <div class="panel-heading back-black">
          <div class="panel-title font-20 white">
            You have not yet rated this {{movieDetailsVM.movie.type.name}}!!
          </div>
        </div>
        <div class="panel-body font-15 gray">
          <div ng-controller="UserRatingDemoCtrl" class="font-15">
            Please Rate :
            <span class="orange" uib-rating ng-model="rate" max="max" read-only="isReadonly" on-hover="hoveringOver(value)" on-leave="overStar = null" titles="['1','2','3']" aria-labelledby="default-rating"></span>
            <span class="label" ng-class="{'label-warning': percent<30, 'label-info': percent>=30 && percent<70, 'label-success': percent>=70}" ng-show="overStar && !isReadonly">{{percent}}%</span>
            <span>({{rate}})</span>
          </div>
          <div class="form-group">
            <label for="exampleInputEmail1"><span class="glyphicon glyphicon-pencil"></span> Comment : </label>
            <textarea rows="2" class="form-control text-area" id="exampleInputEmail1" placeholder="Comment"></textarea>
          </div>
          <div class="row-right">
            <button type="button" class="btn btn-primary">Post</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div ng-controller="UserEditRating as usereditVM">
    <div class="row-fluid">
      <div class="col-md-8 col-md-offset-2 pad-top-20">
        <div class="panel panel-default" ng-if="!usereditVM.edit">
          <div class="panel-heading back-black">
            <div class="panel-title white font-20 overflow-hid">
              Ankan Kumar Giri
              <span class="orange" uib-rating ng-model="usereditVM.rating1" max="usereditVM.max" read-only="usereditVM.isReadonly1"></span>
              <span>({{usereditVM.rating1}})</span>
              <span class="float-right font-15">08-06-2017 12:00:00</span>
            </div>
          </div>
          <div class="panel-body gray font-15">
            <div class="form-group">
              {{usereditVM.comment1}}
            </div>
            <div class="row-right">
              <button type="button" class="btn btn-primary" ng-click="usereditVM.edit=true">Edit</button>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row-fluid">
      <div class="col-md-8 col-md-offset-2">
        <div class="panel panel-default" ng-if="usereditVM.edit">
          <div class="panel-heading back-black">
            <div class="panel-title white font-20">
              Ankan Kumar Giri
            </div>
          </div>
          <div class="panel-body gray white font-15">
            Please Rate :
            <span class="orange" uib-rating ng-model="usereditVM.rating2" max="usereditVM.max" read-only="usereditVM.isReadonly2" on-hover="usereditVM.hoveringOver(value)" on-leave="usereditVM.overStar = null" titles="['1','2','3']" aria-labelledby="default-rating"></span>
            <span class="label" ng-class="{'label-warning': usereditVM.percent<30, 'label-info': usereditVM.percent>=30 && usereditVM.percent<70, 'label-success': usereditVM.percent>=70}" ng-show="usereditVM.overStar && !usereditVM.isReadonly2">{{usereditVM.percent}}%</span>
            <span>({{usereditVM.rating2}})</span>
            <div class="form-group">
              <label for="exampleInputEmail1"><span class="glyphicon glyphicon-pencil"></span> Comment : </label>
              <textarea rows="2" class="form-control text-area" id="exampleInputEmail1" ng-model="usereditVM.comment2" placeholder="Comment"></textarea>
            </div>
            <div class="row-right">
              <button type="button" class="btn btn-primary">Update</button>
              <button type="button" class="btn btn-danger" ng-click="usereditVM.edit=false">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row-fluid">
    <div class="col-md-8 col-md-offset-2">
      <hr>
      <div class="font-20">See what others have to say : </div>
    </div>
  </div>
  <div class="row-fluid" ng-repeat="otherRating in movieDetailsVM.otherRatings">
    <div class="col-md-8 col-md-offset-2 pad-top-20">
      <div class="panel panel-default">
        <div class="panel-heading back-black white">
          <div ng-controller="UserFixedRatingCtrl as userFixedRateVM" class="font-20 white overflow-hid">
            {{otherRating.id.user.firstName}} {{otherRating.id.user.lastName}}
            <span class="orange" uib-rating ng-model="otherRating.ratingScore" max="userFixedRateVM.max" read-only="userFixedRateVM.isReadonly"  titles="['1','2','3']" aria-labelledby="default-rating"></span>
            <span>({{otherRating.ratingScore}})</span>
            <span class="float-right font-15">{{otherRating.ratingScore | date:'yyyy-MM-dd HH:mm:ss'}}</span>
          </div>
        </div>
        <div class="panel-body gray font-15">
          {{otherRating.comments}}
        </div>
      </div>
    </div>
  </div>
</div>